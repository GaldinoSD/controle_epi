{% extends "base.html" %}
{% block content %}
<div class="bg-gray-800 p-8 rounded-xl border border-gray-700 shadow-xl">
  <h2 class="text-2xl font-semibold text-cyan-300 mb-6 flex items-center">
    <i class="fas fa-user-tie mr-3 text-indigo-400"></i> 
    Ficha de EPIs — {{ funcionario.nome }}
  </h2>

  <p class="text-gray-400 mb-4">
    <strong>Matrícula:</strong> {{ funcionario.matricula }}<br>
    <strong>Setor:</strong> {{ funcionario.setor }}<br>
    <strong>Data de admissão:</strong> {{ funcionario.data_admissao.strftime('%d/%m/%Y') }}
  </p>

  {% if entregas %}
  <table class="w-full border-collapse text-left text-gray-200">
    <thead>
      <tr class="bg-gray-900 border-b border-gray-700 text-sm uppercase">
        <th class="py-3 px-4">EPI</th>
        <th class="py-3 px-4 text-center">Qtd</th>
        <th class="py-3 px-4 text-center">Data Entrega</th>
        <th class="py-3 px-4 text-center">Validade</th>
        <th class="py-3 px-4 text-center">Entregue por</th>
      </tr>
    </thead>
    <tbody>
      {% for e in entregas %}
      <tr class="border-b border-gray-700 hover:bg-gray-700/40">
        <td class="py-3 px-4">{{ e.epi.nome }}</td>
        <td class="py-3 px-4 text-center">{{ e.quantidade }}</td>
        <td class="py-3 px-4 text-center">{{ e.data_entrega.strftime('%d/%m/%Y') }}</td>
        <td class="py-3 px-4 text-center">{{ e.validade_entrega.strftime('%d/%m/%Y') if e.validade_entrega else '-' }}</td>
        <td class="py-3 px-4 text-center">{{ e.entregue_por }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="text-gray-500 italic text-center mt-6">Nenhuma entrega registrada para este funcionário.</p>
  {% endif %}
</div>
{% endblock %}
